{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\OneDrive\\\\\\u30C9\\u30AD\\u30E5\\u30E1\\u30F3\\u30C8\\\\reactjs\\\\tailoring-app\\\\src\\\\pages\\\\SellerChatsPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport ChatPanel from \"../components/ChatPanel\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SellerChatsPage({\n  profile\n}) {\n  _s();\n  var _profile$seller, _profile$seller2;\n  const sellerId = (profile === null || profile === void 0 ? void 0 : (_profile$seller = profile.seller) === null || _profile$seller === void 0 ? void 0 : _profile$seller.id) || (profile === null || profile === void 0 ? void 0 : profile.id);\n  const [chats, setChats] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\n  useEffect(() => {\n    if (!sellerId) return;\n    async function fetchChats() {\n      try {\n        const res = await fetch(`http://localhost:8000/api/seller_chats/${sellerId}`);\n        if (res.ok) {\n          const data = await res.json();\n          setChats(data);\n        } else {\n          setChats([]);\n        }\n      } catch (e) {\n        setChats([]);\n      }\n    }\n    fetchChats();\n  }, [sellerId]);\n  if (!sellerId) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: \"Loading seller info...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-72 bg-white border-r\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-bold p-4 text-green-700\",\n        children: \"Your Conversations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 35,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: chats.length === 0 ? /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"p-4 text-gray-400\",\n          children: \"No chats yet\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 38,\n          columnNumber: 13\n        }, this) : chats.map(c => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: `p-4 cursor-pointer hover:bg-green-100 ${(selectedCustomer === null || selectedCustomer === void 0 ? void 0 : selectedCustomer.id) === c.customer_id ? \"bg-green-200\" : \"\"}`,\n          onClick: () => setSelectedCustomer({\n            id: c.customer_id,\n            name: c.customer_name\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold\",\n            children: c.customer_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 48,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500 truncate\",\n            children: c.last_message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 49,\n            columnNumber: 17\n          }, this)]\n        }, c.customer_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col items-center justify-center\",\n      children: selectedCustomer ? /*#__PURE__*/_jsxDEV(ChatPanel, {\n        userId: sellerId,\n        otherId: selectedCustomer.id,\n        userRoleId: 2,\n        otherRoleId: 1,\n        senderName: (profile === null || profile === void 0 ? void 0 : (_profile$seller2 = profile.seller) === null || _profile$seller2 === void 0 ? void 0 : _profile$seller2.shop_name) || (profile === null || profile === void 0 ? void 0 : profile.name),\n        receiverName: selectedCustomer.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 58,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-400\",\n        children: \"Select a conversation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 5\n  }, this);\n}\n_s(SellerChatsPage, \"YHf4QWl1iUk7w4d9bkYGy27Oeqk=\");\n_c = SellerChatsPage;\nvar _c;\n$RefreshReg$(_c, \"SellerChatsPage\");","map":{"version":3,"names":["React","useEffect","useState","ChatPanel","jsxDEV","_jsxDEV","SellerChatsPage","profile","_s","_profile$seller","_profile$seller2","sellerId","seller","id","chats","setChats","selectedCustomer","setSelectedCustomer","fetchChats","res","fetch","ok","data","json","e","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","c","customer_id","onClick","name","customer_name","last_message","userId","otherId","userRoleId","otherRoleId","senderName","shop_name","receiverName","_c","$RefreshReg$"],"sources":["C:/Users/admin/OneDrive/ドキュメント/reactjs/tailoring-app/src/pages/SellerChatsPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport ChatPanel from \"../components/ChatPanel\";\r\n\r\nexport default function SellerChatsPage({ profile }) {\r\n  const sellerId = profile?.seller?.id || profile?.id;\r\n  const [chats, setChats] = useState([]);\r\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\r\n\r\n  useEffect(() => {\r\n    if (!sellerId) return;\r\n    async function fetchChats() {\r\n      try {\r\n        const res = await fetch(`http://localhost:8000/api/seller_chats/${sellerId}`);\r\n        if (res.ok) {\r\n          const data = await res.json();\r\n          setChats(data);\r\n        } else {\r\n          setChats([]);\r\n        }\r\n      } catch (e) {\r\n        setChats([]);\r\n      }\r\n    }\r\n    fetchChats();\r\n  }, [sellerId]);\r\n\r\n  if (!sellerId) {\r\n    return <div className=\"flex items-center justify-center min-h-screen\">Loading seller info...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen\">\r\n      {/* Left sidebar: Customer list */}\r\n      <div className=\"w-72 bg-white border-r\">\r\n        <div className=\"font-bold p-4 text-green-700\">Your Conversations</div>\r\n        <ul>\r\n          {chats.length === 0 ? (\r\n            <li className=\"p-4 text-gray-400\">No chats yet</li>\r\n          ) : (\r\n            chats.map(c => (\r\n              <li\r\n                key={c.customer_id}\r\n                className={`p-4 cursor-pointer hover:bg-green-100 ${\r\n                  selectedCustomer?.id === c.customer_id ? \"bg-green-200\" : \"\"\r\n                }`}\r\n                onClick={() => setSelectedCustomer({ id: c.customer_id, name: c.customer_name })}\r\n              >\r\n                <div className=\"font-semibold\">{c.customer_name}</div>\r\n                <div className=\"text-xs text-gray-500 truncate\">{c.last_message}</div>\r\n              </li>\r\n            ))\r\n          )}\r\n        </ul>\r\n      </div>\r\n      {/* Main panel: Chat */}\r\n      <div className=\"flex-1 flex flex-col items-center justify-center\">\r\n        {selectedCustomer ? (\r\n          <ChatPanel\r\n            userId={sellerId}\r\n            otherId={selectedCustomer.id}\r\n            userRoleId={2}\r\n            otherRoleId={1}\r\n            senderName={profile?.seller?.shop_name || profile?.name}\r\n            receiverName={selectedCustomer.name}\r\n          />\r\n        ) : (\r\n          <div className=\"text-gray-400\">Select a conversation</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}