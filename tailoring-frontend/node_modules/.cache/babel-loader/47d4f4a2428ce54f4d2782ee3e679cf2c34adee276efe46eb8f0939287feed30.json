{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\OneDrive\\\\\\u30C9\\u30AD\\u30E5\\u30E1\\u30F3\\u30C8\\\\reactjs\\\\tailoring-app\\\\src\\\\pages\\\\ChatPage.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useNavigate, useParams } from \"react-router-dom\";\nimport ChatPanel from \"../components/ChatPanel\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function SellerChatsPage({\n  profile\n}) {\n  _s();\n  var _profile$seller, _profile$seller2;\n  const sellerId = (profile === null || profile === void 0 ? void 0 : (_profile$seller = profile.seller) === null || _profile$seller === void 0 ? void 0 : _profile$seller.id) || (profile === null || profile === void 0 ? void 0 : profile.id);\n  const [chats, setChats] = useState([]);\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\n  useEffect(() => {\n    // Fetch all chats for this seller\n    async function fetchChats() {\n      const res = await fetch(`http://localhost:8000/api/seller_chats/${sellerId}`);\n      const data = await res.json();\n      setChats(data); // [{customer_id, customer_name, last_message, ...}]\n    }\n    if (sellerId) fetchChats();\n  }, [sellerId]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex min-h-screen\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-72 bg-white border-r\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"font-bold p-4\",\n        children: \"Your Conversations\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 24,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: chats.map(c => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: `p-4 cursor-pointer hover:bg-green-100 ${(selectedCustomer === null || selectedCustomer === void 0 ? void 0 : selectedCustomer.id) === c.customer_id ? \"bg-green-200\" : \"\"}`,\n          onClick: () => setSelectedCustomer({\n            id: c.customer_id,\n            name: c.customer_name\n          }),\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"font-semibold\",\n            children: c.customer_name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"text-xs text-gray-500\",\n            children: c.last_message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 15\n          }, this)]\n        }, c.customer_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 27,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 25,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 23,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 flex flex-col items-center justify-center\",\n      children: selectedCustomer ? /*#__PURE__*/_jsxDEV(ChatPanel, {\n        userId: sellerId,\n        otherId: selectedCustomer.id,\n        userRoleId: 2,\n        otherRoleId: 1,\n        senderName: (profile === null || profile === void 0 ? void 0 : (_profile$seller2 = profile.seller) === null || _profile$seller2 === void 0 ? void 0 : _profile$seller2.shop_name) || (profile === null || profile === void 0 ? void 0 : profile.name),\n        receiverName: selectedCustomer.name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-gray-400\",\n        children: \"Select a conversation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 47,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 36,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 21,\n    columnNumber: 5\n  }, this);\n}\n_s(SellerChatsPage, \"YHf4QWl1iUk7w4d9bkYGy27Oeqk=\");\n_c = SellerChatsPage;\nvar _c;\n$RefreshReg$(_c, \"SellerChatsPage\");","map":{"version":3,"names":["React","useEffect","useState","useNavigate","useParams","ChatPanel","jsxDEV","_jsxDEV","SellerChatsPage","profile","_s","_profile$seller","_profile$seller2","sellerId","seller","id","chats","setChats","selectedCustomer","setSelectedCustomer","fetchChats","res","fetch","data","json","className","children","fileName","_jsxFileName","lineNumber","columnNumber","map","c","customer_id","onClick","name","customer_name","last_message","userId","otherId","userRoleId","otherRoleId","senderName","shop_name","receiverName","_c","$RefreshReg$"],"sources":["C:/Users/admin/OneDrive/ドキュメント/reactjs/tailoring-app/src/pages/ChatPage.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\nimport ChatPanel from \"../components/ChatPanel\";\r\n\r\nexport default function SellerChatsPage({ profile }) {\r\n  const sellerId = profile?.seller?.id || profile?.id;\r\n  const [chats, setChats] = useState([]);\r\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\r\n\r\n  useEffect(() => {\r\n    // Fetch all chats for this seller\r\n    async function fetchChats() {\r\n      const res = await fetch(`http://localhost:8000/api/seller_chats/${sellerId}`);\r\n      const data = await res.json();\r\n      setChats(data); // [{customer_id, customer_name, last_message, ...}]\r\n    }\r\n    if (sellerId) fetchChats();\r\n  }, [sellerId]);\r\n\r\n  return (\r\n    <div className=\"flex min-h-screen\">\r\n      {/* Left: Customer list */}\r\n      <div className=\"w-72 bg-white border-r\">\r\n        <div className=\"font-bold p-4\">Your Conversations</div>\r\n        <ul>\r\n          {chats.map(c => (\r\n            <li key={c.customer_id} className={`p-4 cursor-pointer hover:bg-green-100 ${selectedCustomer?.id === c.customer_id ? \"bg-green-200\" : \"\"}`}\r\n                onClick={() => setSelectedCustomer({id: c.customer_id, name: c.customer_name})}>\r\n              <div className=\"font-semibold\">{c.customer_name}</div>\r\n              <div className=\"text-xs text-gray-500\">{c.last_message}</div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n      </div>\r\n      {/* Right: Chat panel */}\r\n      <div className=\"flex-1 flex flex-col items-center justify-center\">\r\n        {selectedCustomer ? (\r\n          <ChatPanel\r\n            userId={sellerId}\r\n            otherId={selectedCustomer.id}\r\n            userRoleId={2}\r\n            otherRoleId={1}\r\n            senderName={profile?.seller?.shop_name || profile?.name}\r\n            receiverName={selectedCustomer.name}\r\n          />\r\n        ) : (\r\n          <div className=\"text-gray-400\">Select a conversation</div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAClD,SAASC,WAAW,EAAEC,SAAS,QAAQ,kBAAkB;AACzD,OAAOC,SAAS,MAAM,yBAAyB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhD,eAAe,SAASC,eAAeA,CAAC;EAAEC;AAAQ,CAAC,EAAE;EAAAC,EAAA;EAAA,IAAAC,eAAA,EAAAC,gBAAA;EACnD,MAAMC,QAAQ,GAAG,CAAAJ,OAAO,aAAPA,OAAO,wBAAAE,eAAA,GAAPF,OAAO,CAAEK,MAAM,cAAAH,eAAA,uBAAfA,eAAA,CAAiBI,EAAE,MAAIN,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAEM,EAAE;EACnD,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGf,QAAQ,CAAC,EAAE,CAAC;EACtC,MAAM,CAACgB,gBAAgB,EAAEC,mBAAmB,CAAC,GAAGjB,QAAQ,CAAC,IAAI,CAAC;EAE9DD,SAAS,CAAC,MAAM;IACd;IACA,eAAemB,UAAUA,CAAA,EAAG;MAC1B,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,0CAA0CT,QAAQ,EAAE,CAAC;MAC7E,MAAMU,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAI,CAAC,CAAC;MAC7BP,QAAQ,CAACM,IAAI,CAAC,CAAC,CAAC;IAClB;IACA,IAAIV,QAAQ,EAAEO,UAAU,CAAC,CAAC;EAC5B,CAAC,EAAE,CAACP,QAAQ,CAAC,CAAC;EAEd,oBACEN,OAAA;IAAKkB,SAAS,EAAC,mBAAmB;IAAAC,QAAA,gBAEhCnB,OAAA;MAAKkB,SAAS,EAAC,wBAAwB;MAAAC,QAAA,gBACrCnB,OAAA;QAAKkB,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAC;MAAkB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK,CAAC,eACvDvB,OAAA;QAAAmB,QAAA,EACGV,KAAK,CAACe,GAAG,CAACC,CAAC,iBACVzB,OAAA;UAAwBkB,SAAS,EAAE,yCAAyC,CAAAP,gBAAgB,aAAhBA,gBAAgB,uBAAhBA,gBAAgB,CAAEH,EAAE,MAAKiB,CAAC,CAACC,WAAW,GAAG,cAAc,GAAG,EAAE,EAAG;UACvIC,OAAO,EAAEA,CAAA,KAAMf,mBAAmB,CAAC;YAACJ,EAAE,EAAEiB,CAAC,CAACC,WAAW;YAAEE,IAAI,EAAEH,CAAC,CAACI;UAAa,CAAC,CAAE;UAAAV,QAAA,gBACjFnB,OAAA;YAAKkB,SAAS,EAAC,eAAe;YAAAC,QAAA,EAAEM,CAAC,CAACI;UAAa;YAAAT,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC,eACtDvB,OAAA;YAAKkB,SAAS,EAAC,uBAAuB;YAAAC,QAAA,EAAEM,CAAC,CAACK;UAAY;YAAAV,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAM,CAAC;QAAA,GAHtDE,CAAC,CAACC,WAAW;UAAAN,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAIlB,CACL;MAAC;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACA,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACF,CAAC,eAENvB,OAAA;MAAKkB,SAAS,EAAC,kDAAkD;MAAAC,QAAA,EAC9DR,gBAAgB,gBACfX,OAAA,CAACF,SAAS;QACRiC,MAAM,EAAEzB,QAAS;QACjB0B,OAAO,EAAErB,gBAAgB,CAACH,EAAG;QAC7ByB,UAAU,EAAE,CAAE;QACdC,WAAW,EAAE,CAAE;QACfC,UAAU,EAAE,CAAAjC,OAAO,aAAPA,OAAO,wBAAAG,gBAAA,GAAPH,OAAO,CAAEK,MAAM,cAAAF,gBAAA,uBAAfA,gBAAA,CAAiB+B,SAAS,MAAIlC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAE0B,IAAI,CAAC;QACxDS,YAAY,EAAE1B,gBAAgB,CAACiB;MAAK;QAAAR,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACrC,CAAC,gBAEFvB,OAAA;QAAKkB,SAAS,EAAC,eAAe;QAAAC,QAAA,EAAC;MAAqB;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAK;IAC1D;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAACpB,EAAA,CA/CuBF,eAAe;AAAAqC,EAAA,GAAfrC,eAAe;AAAA,IAAAqC,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}