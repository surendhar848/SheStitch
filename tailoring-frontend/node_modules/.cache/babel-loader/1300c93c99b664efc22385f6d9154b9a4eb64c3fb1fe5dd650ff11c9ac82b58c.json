{"ast":null,"code":"// ... imports ...\n\nexport default function Login({\n  setProfile\n}) {\n  // ... state and useNavigate ...\n\n  async function handleLogin(e) {\n    e.preventDefault();\n    setError(\"\");\n    try {\n      const res = await fetch(\"http://localhost:8000/api/login\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          email,\n          password\n        })\n      });\n      const data = await res.json();\n      if (res.ok && data.user && data.access_token) {\n        localStorage.setItem(\"access_token\", data.access_token);\n        let fullProfile = {\n          ...data.user\n        };\n        if (data.user.role === \"seller\") {\n          const sellerRes = await fetch(`http://localhost:8000/api/sellers/user/${data.user.id}`, {\n            headers: {\n              \"Content-Type\": \"application/json\",\n              \"Authorization\": \"Bearer \" + data.access_token\n            }\n          });\n          if (sellerRes.ok) {\n            const sellerData = await sellerRes.json();\n            fullProfile.seller = sellerData;\n          }\n          setProfile(fullProfile);\n          navigate(\"/seller\");\n        } else {\n          setProfile(fullProfile);\n          navigate(\"/customer\");\n        }\n      } else {\n        setError(data.message || \"Login failed\");\n      }\n    } catch (err) {\n      setError(\"Network error\");\n    }\n  }\n\n  // ... return JSX ...\n}\n_c = Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["Login","setProfile","handleLogin","e","preventDefault","setError","res","fetch","method","headers","body","JSON","stringify","email","password","data","json","ok","user","access_token","localStorage","setItem","fullProfile","role","sellerRes","id","sellerData","seller","navigate","message","err","_c","$RefreshReg$"],"sources":["C:/Users/admin/OneDrive/ドキュメント/reactjs/tailoring-app/src/pages/Login.jsx"],"sourcesContent":["// ... imports ...\r\n\r\nexport default function Login({ setProfile }) {\r\n  // ... state and useNavigate ...\r\n\r\n  async function handleLogin(e) {\r\n    e.preventDefault();\r\n    setError(\"\");\r\n    try {\r\n      const res = await fetch(\"http://localhost:8000/api/login\", {\r\n        method: \"POST\",\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify({ email, password }),\r\n      });\r\n      const data = await res.json();\r\n      if (res.ok && data.user && data.access_token) {\r\n        localStorage.setItem(\"access_token\", data.access_token);\r\n        let fullProfile = { ...data.user };\r\n        if (data.user.role === \"seller\") {\r\n          const sellerRes = await fetch(`http://localhost:8000/api/sellers/user/${data.user.id}`, {\r\n            headers: {\r\n              \"Content-Type\": \"application/json\",\r\n              \"Authorization\": \"Bearer \" + data.access_token\r\n            }\r\n          });\r\n          if (sellerRes.ok) {\r\n            const sellerData = await sellerRes.json();\r\n            fullProfile.seller = sellerData;\r\n          }\r\n          setProfile(fullProfile);\r\n          navigate(\"/seller\");\r\n        } else {\r\n          setProfile(fullProfile);\r\n          navigate(\"/customer\");\r\n        }\r\n      } else {\r\n        setError(data.message || \"Login failed\");\r\n      }\r\n    } catch (err) {\r\n      setError(\"Network error\");\r\n    }\r\n  }\r\n\r\n  // ... return JSX ...\r\n}"],"mappings":"AAAA;;AAEA,eAAe,SAASA,KAAKA,CAAC;EAAEC;AAAW,CAAC,EAAE;EAC5C;;EAEA,eAAeC,WAAWA,CAACC,CAAC,EAAE;IAC5BA,CAAC,CAACC,cAAc,CAAC,CAAC;IAClBC,QAAQ,CAAC,EAAE,CAAC;IACZ,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMC,KAAK,CAAC,iCAAiC,EAAE;QACzDC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAAC;UAAEC,KAAK;UAAEC;QAAS,CAAC;MAC1C,CAAC,CAAC;MACF,MAAMC,IAAI,GAAG,MAAMT,GAAG,CAACU,IAAI,CAAC,CAAC;MAC7B,IAAIV,GAAG,CAACW,EAAE,IAAIF,IAAI,CAACG,IAAI,IAAIH,IAAI,CAACI,YAAY,EAAE;QAC5CC,YAAY,CAACC,OAAO,CAAC,cAAc,EAAEN,IAAI,CAACI,YAAY,CAAC;QACvD,IAAIG,WAAW,GAAG;UAAE,GAAGP,IAAI,CAACG;QAAK,CAAC;QAClC,IAAIH,IAAI,CAACG,IAAI,CAACK,IAAI,KAAK,QAAQ,EAAE;UAC/B,MAAMC,SAAS,GAAG,MAAMjB,KAAK,CAAC,0CAA0CQ,IAAI,CAACG,IAAI,CAACO,EAAE,EAAE,EAAE;YACtFhB,OAAO,EAAE;cACP,cAAc,EAAE,kBAAkB;cAClC,eAAe,EAAE,SAAS,GAAGM,IAAI,CAACI;YACpC;UACF,CAAC,CAAC;UACF,IAAIK,SAAS,CAACP,EAAE,EAAE;YAChB,MAAMS,UAAU,GAAG,MAAMF,SAAS,CAACR,IAAI,CAAC,CAAC;YACzCM,WAAW,CAACK,MAAM,GAAGD,UAAU;UACjC;UACAzB,UAAU,CAACqB,WAAW,CAAC;UACvBM,QAAQ,CAAC,SAAS,CAAC;QACrB,CAAC,MAAM;UACL3B,UAAU,CAACqB,WAAW,CAAC;UACvBM,QAAQ,CAAC,WAAW,CAAC;QACvB;MACF,CAAC,MAAM;QACLvB,QAAQ,CAACU,IAAI,CAACc,OAAO,IAAI,cAAc,CAAC;MAC1C;IACF,CAAC,CAAC,OAAOC,GAAG,EAAE;MACZzB,QAAQ,CAAC,eAAe,CAAC;IAC3B;EACF;;EAEA;AACF;AAAC0B,EAAA,GA1CuB/B,KAAK;AAAA,IAAA+B,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}